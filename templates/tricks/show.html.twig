{% extends 'base.html.twig' %}

{% block title %}Tricks{% endblock %}

{% block body %}

    {% set hero_title = trick.title %}
    {% set hero_subtitle = "" %}
    {{ include('component/_hero_trick_show.html.twig') }}

    <section class="hero is-primary is-medium">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    Barre video/images (caroussel?)
                </h1>
            </div>
        </div>
    </section>



    <div class="container mt-6">

        <p>{{ trick.description }}</p>

        {{ form_start(form) }}
        {{ form_widget(form) }}
        <button class="button is-primary">Enregistrer</button>
        {{ form_end(form) }}

        {% for comment in trick.comments %}
            <div class="box">
                <div class="message-body">
                    <div class="columns">
                        <div class="column is-one-fifth">
                            <figure class="image is-128x128">
                                {% if comment.user.image is not null %}
                                    {% set image_source = asset('/uploads/' ~ comment.user.image.name) %}
                                {% else %}
                                    {% set image_source = asset('/img/unknow.jpg') %}
                                {% endif %}
                                <img class="" src="{{ image_source }}" alt="Image">
                            </figure>
                            <p class="mt-2">
                                Par <strong>{{ comment.user.username }} </strong> <small>le todo : pubdate</small>
                            </p>
                        </div>
                        <div class="column">{{ comment.content }}</div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>



    {# <div class="debug"> #}
    {# {% if app.user and app.user.id == trick.author.id %} #}
    {# <h1 class="debug-title">PROPRIO</h1> #}
    {# <p>proprietaire de cet article, tu peux edit</p> #}
    {# <a href="{{ path('tricks_edit', {'id' : trick.id}) }}">edit the trick {{ trick.id }}</a> #}
    {# {% elseif is_granted('ROLE_ADMIN') %} #}
    {# <p>cet article nest pas a toi mais t'es admin donc ok</p> #}
    {# <a href="{{ path('tricks_edit', {'id' : trick.id}) }}">edit the trick {{ trick.id }}</a> #}
    {# {% else %} #}
    {# <h1 class="debug-title">PROPRIO</h1> #}
    {# <p>cet article nest pas a toi tu peux pas edit</p> #}
    {# {% endif %} #}
    {# </div> #}

    {# <h1>Tricks</h1> #}

    {# <table class="table"> #}
    {# <tbody> #}
    {# <tr> #}
    {# <th>Id</th> #}
    {# <td>{{ trick.id }}</td> #}
    {# </tr> #}
    {# <tr> #}
    {# <th>Title</th> #}
    {# <td>{{ trick.title }}</td> #}
    {# </tr> #}
    {# <tr> #}
    {# <th>Description</th> #}
    {# <td>{{ trick.description }}</td> #}
    {# </tr> #}
    {# <tr> #}
    {# <th>Nbr Images</th> #}
    {# <td>{{ trick.images|length }}</td> #}
    {# </tr> #}
    {# <tr> #}
    {# <th>Nbr Videos</th> #}
    {# <td>{{ trick.video|length }}</td> #}
    {# </tr> #}
    {# </tbody> #}
    {# </table> #}

    {# <a href="{{ path('tricks_index') }}">back to list</a> #}

    {# <a href="{{ path('tricks_edit', {'id': trick.id}) }}">edit</a> #}

    {# {{ include('tricks/_delete_form.html.twig') }} #}
{% endblock %}
